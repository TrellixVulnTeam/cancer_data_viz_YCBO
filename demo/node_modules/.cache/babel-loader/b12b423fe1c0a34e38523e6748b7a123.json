{"ast":null,"code":"import * as d3 from 'd3';\nexport function drawBubble(height, width) {\n  var margin = {\n    top: 30,\n    right: 20,\n    bottom: 200,\n    left: 150\n  };\n  var width = 1000 - margin.left - margin.right,\n      height = 800 - margin.top - margin.bottom;\n  var svg = d3.select(\"#bubble1\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  var bubble_data = d3.csv(\"https://raw.githubusercontent.com/Heun-Johnson/dsci554projectdata/main/bubble_data.csv\");\n  bubble_data.then(function (dataset) {\n    var x = d3.scaleLinear().domain([0, 80]).range([0, width]);\n    var y = d3.scaleLinear().domain([0, 4]).range([height, 0]);\n    var z = d3.scaleLinear().domain([0, d3.max(dataset, function (d) {\n      return d.zip_pop;\n    })]).range([0, 3]);\n    var xAxis = d3.axisBottom().scale(x).tickValues([0, 20, 40, 60, 80]);\n    var yAxis = d3.axisLeft().scale(y).tickValues([0, 1, 2, 3, 4]);\n    var Tooltip = d3.select(\"#bubble1\").append(\"div\").style(\"opacity\", 0).attr(\"class\", \"tooltip\").style(\"background-color\", \"white\").style(\"border\", \"solid\").style(\"border-width\", \"2px\").style(\"border-radius\", \"5px\").style(\"padding\", \"5px\");\n\n    var mouseover = function (d) {\n      Tooltip.style(\"opacity\", 1);\n      d3.select(this).style(\"stroke\", \"black\").style(\"opacity\", 1).style(\"fill\", '#005A32');\n    };\n\n    var mousemove = function (d) {\n      Tooltip.html(\"The average number of deaths in this zip code is \" + this.getAttribute('deaths') + \".\").style(\"left\", this.getAttribute('cx') + \"px\"); // .style(\"bottom\", (this.getAttribute('cy')) + \"px\");\n    };\n\n    var mouseleave = function (d) {\n      Tooltip.style(\"opacity\", 0);\n      d3.select(this).style(\"stroke\", \"none\").style(\"opacity\", 1).style(\"fill\", '#28a745');\n    };\n\n    svg.selectAll('circle').data(dataset).enter().append('circle').attr('fill', '#28a745').style('fill-opacity', 0.1).attr('stroke', '#005A32').attr('stroke-width', 0.3).attr('cx', function (d) {\n      return x(d.zip_canc_deaths_10k);\n    }).attr('cy', function (d) {\n      return y(d.zip_canc_COH_10k);\n    }).attr('r', function (d) {\n      return z(d.zip_pop);\n    }) // .attr('class', 'bubble')\n    .attr('deaths', function (d) {\n      return d.zip_canc_deaths_10k;\n    }).attr('population', function (d) {\n      return d.zip_pop;\n    }).on(\"mouseover\", mouseover).on(\"mousemove\", mousemove).on(\"mouseleave\", mouseleave); // svg.selectAll('text')\n    //     .data(dataset)\n    //     .enter()\n    //     .append('text')\n    //     .attr('x', function (d, i) { return x(d.zip_canc_deaths_10k); })\n    //     .attr('y', function (d) { return y(d.zip_canc_COH_10k);  })\n    //     .attr('class', 'bubble')\n    //     // .text(function (d) { return d.zip_code; })\n    // linearRegression = ss.linearRegression(dataset.map(d => [d.deaths, d.coh_patients]));\n    // The scale you use for bubble size\n\n    var size = d3.scaleSqrt().domain([1, 100000]) // What's in the data, let's say it is percentage\n    .range([0, 30]); // Size in pixel\n    // Add legend: circles\n\n    var valuesToShow = [1000, 20000, 100000];\n    var xCircle = width - 230;\n    var xLabel = width - 180;\n    var yCircle = height - 70;\n    svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"circle\").attr(\"cx\", xCircle).attr(\"cy\", function (d) {\n      return yCircle - size(d);\n    }).attr(\"r\", function (d) {\n      return size(d);\n    }).style(\"fill\", \"none\").attr(\"stroke\", \"black\").attr(\"stroke-width\", 0.3); // Add legend: segments\n\n    svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"line\").attr('x1', function (d) {\n      return xCircle + size(d);\n    }).attr('x2', xLabel).attr('y1', function (d) {\n      return yCircle - size(d);\n    }).attr('y2', function (d) {\n      return yCircle - size(d);\n    }).attr('stroke', 'black').attr('stroke-width', 0.5).style('stroke-dasharray', '2,2'); // Add legend: labels\n\n    svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"text\").attr('x', xLabel).attr('y', function (d) {\n      return yCircle - size(d);\n    }).text(function (d) {\n      return d;\n    }).style(\"font-size\", 10).attr('alignment-baseline', 'middle');\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(xAxis);\n    svg.append(\"g\").call(yAxis);\n    svg.append(\"text\").attr(\"x\", width - 650).attr(\"y\", height + 60).classed('label', true).text(\"Number of cancer deaths in 2019 (per 10k residents)\");\n    svg.append(\"text\").attr(\"x\", width - 1400).attr(\"y\", height - 650).classed('label', true).attr(\"transform\", \"rotate(-90)\").text(\"Number of cancer patients at City of Hope (per 10k residents)\");\n    svg.append('text').attr('x', width - 340).attr('y', height - 150).text('Number of residents in zip code:').attr('class', 'bubble');\n  });\n}","map":{"version":3,"sources":["/Users/carlin/Desktop/USC_classes/DSCI_554/project-datadocs-real/demo/src/views/charts/BubbleChart.js"],"names":["d3","drawBubble","height","width","margin","top","right","bottom","left","svg","select","append","attr","bubble_data","csv","then","dataset","x","scaleLinear","domain","range","y","z","max","d","zip_pop","xAxis","axisBottom","scale","tickValues","yAxis","axisLeft","Tooltip","style","mouseover","mousemove","html","getAttribute","mouseleave","selectAll","data","enter","zip_canc_deaths_10k","zip_canc_COH_10k","on","size","scaleSqrt","valuesToShow","xCircle","xLabel","yCircle","text","call","classed"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\n\nexport function drawBubble(height, width){\n  \n  var margin = { top: 30, right: 20, bottom: 200, left: 150 };\n  var width = 1000 - margin.left - margin.right,\n    height = 800 - margin.top - margin.bottom;\n  \n  var svg = d3.select(\"#bubble1\")\n    .append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  \n  var bubble_data = d3.csv(\"https://raw.githubusercontent.com/Heun-Johnson/dsci554projectdata/main/bubble_data.csv\");\n\n  bubble_data.then(function (dataset) { \n    \n        var x = d3.scaleLinear()\n          .domain([0, 80])\n          .range([0, width]);\n      \n        var y = d3.scaleLinear()\n          .domain([0, 4])\n          .range([height, 0]);\n      \n        var z = d3.scaleLinear()\n          .domain([0, d3.max(dataset, function(d) { return d.zip_pop; })])\n          .range([0,3]);\n  \n        var xAxis = d3.axisBottom()\n          .scale(x)\n          .tickValues([0,20,40,60,80]);\n      \n        var yAxis = d3.axisLeft()\n          .scale(y)\n          .tickValues([0,1,2,3,4]);\n\n          var Tooltip = d3.select(\"#bubble1\")\n  .append(\"div\")\n  .style(\"opacity\", 0)\n  .attr(\"class\", \"tooltip\")\n  .style(\"background-color\", \"white\")\n  .style(\"border\", \"solid\")\n  .style(\"border-width\", \"2px\")\n  .style(\"border-radius\", \"5px\")\n  .style(\"padding\", \"5px\")\n\n          \n          var mouseover = function(d) {\n            Tooltip\n              .style(\"opacity\", 1)\n            d3.select(this)\n              .style(\"stroke\", \"black\")\n              .style(\"opacity\", 1)\n              .style(\"fill\", '#005A32')\n          }\n        \n          var mousemove = function(d) {\n            Tooltip\n              .html(\"The average number of deaths in this zip code is \"+ this.getAttribute('deaths')+\".\")\n              .style(\"left\", (this.getAttribute('cx')) + \"px\")\n              // .style(\"bottom\", (this.getAttribute('cy')) + \"px\");\n          }\n        \n          var mouseleave = function(d) {\n            Tooltip\n              .style(\"opacity\", 0)\n            d3.select(this)\n              .style(\"stroke\", \"none\")\n              .style(\"opacity\", 1)\n              .style(\"fill\", '#28a745')\n          }\n\n  \n        svg.selectAll('circle')\n          .data(dataset)\n          .enter()\n          .append('circle')\n          .attr('fill','#28a745')\n          .style('fill-opacity',0.1)\n          .attr('stroke','#005A32')\n          .attr('stroke-width',0.3)\n          .attr('cx', function (d) { return x(d.zip_canc_deaths_10k); } )\n          .attr('cy', function (d) { return y(d.zip_canc_COH_10k); })\n          .attr('r', function (d) { return z(d.zip_pop); })  \n          // .attr('class', 'bubble')\n          .attr('deaths',function(d) { return (d.zip_canc_deaths_10k); })\n          .attr('population',function(d) { return (d.zip_pop); })\n          .on(\"mouseover\", mouseover)\n          .on(\"mousemove\", mousemove)\n          .on(\"mouseleave\", mouseleave)   ;\n      // svg.selectAll('text')\n      //     .data(dataset)\n      //     .enter()\n      //     .append('text')\n      //     .attr('x', function (d, i) { return x(d.zip_canc_deaths_10k); })\n      //     .attr('y', function (d) { return y(d.zip_canc_COH_10k);  })\n      //     .attr('class', 'bubble')\n      //     // .text(function (d) { return d.zip_code; })\n  \n        // linearRegression = ss.linearRegression(dataset.map(d => [d.deaths, d.coh_patients]));\n        \n  \n        // The scale you use for bubble size\n        var size = d3.scaleSqrt()\n          .domain([1, 100000])  // What's in the data, let's say it is percentage\n          .range([0, 30])  // Size in pixel\n        \n        // Add legend: circles\n        var valuesToShow = [1000,20000, 100000]\n        var xCircle = width-230\n        var xLabel = width-180\n        var yCircle = height-70\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"circle\")\n            .attr(\"cx\", xCircle)\n            .attr(\"cy\", function(d){ return yCircle - size(d) } )\n            .attr(\"r\", function(d){ return size(d) })\n            .style(\"fill\", \"none\")\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 0.3)\n            \n        \n        // Add legend: segments\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"line\")\n            .attr('x1', function(d){ return xCircle + size(d) } )\n            .attr('x2', xLabel)\n            .attr('y1', function(d){ return yCircle - size(d) } )\n            .attr('y2', function(d){ return yCircle - size(d) } )\n            .attr('stroke', 'black')\n            .attr('stroke-width', 0.5)\n            .style('stroke-dasharray', ('2,2'))\n        \n        // Add legend: labels\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"text\")\n            .attr('x', xLabel)\n            .attr('y', function(d){ return yCircle - size(d) } )\n            .text( function(d){ return d } )\n            .style(\"font-size\", 10)\n            .attr('alignment-baseline', 'middle')\n  \n        svg.append(\"g\")\n          .attr(\"transform\", \"translate(0,\" + height + \")\")\n          .call(xAxis);\n      \n        svg.append(\"g\")\n          .call(yAxis);\n      \n        svg.append(\"text\")  \n            .attr(\"x\", width-650)\n            .attr(\"y\", height+60)\n            .classed('label', true)\n            .text(\"Number of cancer deaths in 2019 (per 10k residents)\");\n        \n        svg.append(\"text\")\n            .attr(\"x\", width-1400)\n            .attr(\"y\", height-650)\n            .classed('label', true)\n            .attr(\"transform\", \"rotate(-90)\")\n            .text(\"Number of cancer patients at City of Hope (per 10k residents)\");\n                      \n        svg.append('text')\n            .attr('x', width-340) \n            .attr('y', height-150) \n            .text('Number of residents in zip code:')\n            .attr('class', 'bubble');    \n          });\n        \n}\n"]},"metadata":{},"sourceType":"module"}