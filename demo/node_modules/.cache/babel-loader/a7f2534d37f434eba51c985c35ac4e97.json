{"ast":null,"code":"import * as d3 from 'd3';\nexport function drawBubble(height, width) {\n  var margin = {\n    top: 30,\n    right: 20,\n    bottom: 200,\n    left: 150\n  };\n  var width = 1000 - margin.left - margin.right,\n      height = 800 - margin.top - margin.bottom;\n  var svg = d3.select(\"#bubble1\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  var bubble_data = d3.csv(\"https://raw.githubusercontent.com/Heun-Johnson/dsci554projectdata/main/bubble_data.csv\");\n  bubble_data.then(function (dataset) {\n    var x = d3.scaleLinear().domain([0, 80]).range([0, width]);\n    var y = d3.scaleLinear().domain([0, 4]).range([height, 0]);\n    var z = d3.scaleLinear().domain([0, d3.max(dataset, function (d) {\n      return d.zip_pop;\n    })]).range([0, 30]);\n    var xAxis = d3.axisBottom().scale(x).tickValues([0, 20, 40, 60, 80]);\n    var yAxis = d3.axisLeft().scale(y).tickValues([0, 1, 2, 3, 4]);\n    svg.selectAll('circle').data(dataset).enter().append('circle').attr('fill', 'grey').style('fill-opacity', 0.1).attr('stroke', 'black').attr('stroke-width', 0.3).attr('cx', function (d) {\n      return x(d.zip_canc_deaths_10k);\n    }).attr('cy', function (d) {\n      return y(d.zip_canc_COH_10k);\n    }).attr('r', function (d) {\n      return z(d.zip_pop);\n    }); // .attr('class', 'bubble')\n\n    svg.selectAll('text').data(dataset).enter().append('text').attr('x', function (d, i) {\n      return x(d.zip_canc_deaths_10k);\n    }).attr('y', function (d) {\n      return y(d.zip_canc_COH_10k);\n    }).attr('class', 'bubble'); // .text(function (d) { return d.zip_code; })\n    // linearRegression = ss.linearRegression(dataset.map(d => [d.deaths, d.coh_patients]));\n    // The scale you use for bubble size\n\n    var size = d3.scaleSqrt().domain([1, 100000]) // What's in the data, let's say it is percentage\n    .range([0, 10]); // Size in pixel\n    // Add legend: circles\n\n    var valuesToShow = [1000, 20000, 100000];\n    var xCircle = 700;\n    var xLabel = 750;\n    var yCircle = 500;\n    svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"circle\").attr(\"cx\", xCircle).attr(\"cy\", function (d) {\n      return yCircle - size(d);\n    }).attr(\"r\", function (d) {\n      return size(d);\n    }).style(\"fill\", \"none\").attr(\"stroke\", \"black\").attr(\"stroke-width\", 0.3); // Add legend: segments\n\n    svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"line\").attr('x1', function (d) {\n      return xCircle + size(d);\n    }).attr('x2', xLabel).attr('y1', function (d) {\n      return yCircle - size(d);\n    }).attr('y2', function (d) {\n      return yCircle - size(d);\n    }).attr('stroke', 'black').attr('stroke-width', 0.5).style('stroke-dasharray', '2,2'); // Add legend: labels\n\n    svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"text\").attr('x', xLabel).attr('y', function (d) {\n      return yCircle - size(d);\n    }).text(function (d) {\n      return d;\n    }).style(\"font-size\", 10).attr('alignment-baseline', 'middle');\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(xAxis);\n    svg.append(\"g\").call(yAxis);\n    svg.append(\"text\").attr(\"x\", 250).attr(\"y\", 630).classed('label', true).text(\"Number of cancer deaths in 2019 (per 10k residents)\");\n    svg.append(\"text\").attr(\"x\", -450).attr(\"y\", -50).classed('label', true).attr(\"transform\", \"rotate(-90)\").text(\"Number of cancer patients at City of Hope (per 10k residents)\");\n    svg.append('text').attr('x', 50).attr('y', 10).attr('class', 'bar').text('Health care access focus areas:');\n    svg.append('text').attr('x', 50).attr('y', 40).attr('class', 'bar').text('Treating more patients in zip codes with higher cancer death rates');\n    svg.append('text').attr('x', 710).attr('y', 420).text('Number of residents in zip code:').attr('class', 'bubble');\n  });\n}","map":{"version":3,"sources":["/Users/HHJ/Dropbox/Class/2021/DSCI554/Github/project-datadocs/demo/src/views/charts/BubbleChart.js"],"names":["d3","drawBubble","height","width","margin","top","right","bottom","left","svg","select","append","attr","bubble_data","csv","then","dataset","x","scaleLinear","domain","range","y","z","max","d","zip_pop","xAxis","axisBottom","scale","tickValues","yAxis","axisLeft","selectAll","data","enter","style","zip_canc_deaths_10k","zip_canc_COH_10k","i","size","scaleSqrt","valuesToShow","xCircle","xLabel","yCircle","text","call","classed"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\n\nexport function drawBubble(height, width){\n  \n  var margin = { top: 30, right: 20, bottom: 200, left: 150 };\n  var width = 1000 - margin.left - margin.right,\n    height = 800 - margin.top - margin.bottom;\n  \n  var svg = d3.select(\"#bubble1\")\n  .append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  \n  var bubble_data = d3.csv(\"https://raw.githubusercontent.com/Heun-Johnson/dsci554projectdata/main/bubble_data.csv\")\n\n  bubble_data.then(function (dataset) { \n    \n        var x = d3.scaleLinear()\n          .domain([0, 80])\n          .range([0, width]);\n      \n        var y = d3.scaleLinear()\n          .domain([0, 4])\n          .range([height, 0]);\n      \n        var z = d3.scaleLinear()\n          .domain([0, d3.max(dataset, function(d) { return d.zip_pop; })])\n          .range([0,30]);\n  \n        var xAxis = d3.axisBottom()\n          .scale(x)\n          .tickValues([0,20,40,60,80]);\n      \n        var yAxis = d3.axisLeft()\n          .scale(y)\n          .tickValues([0,1,2,3,4]);\n      \n  \n        svg.selectAll('circle')\n          .data(dataset)\n          .enter()\n          .append('circle')\n          .attr('fill','grey')\n          .style('fill-opacity',0.1)\n          .attr('stroke','black')\n          .attr('stroke-width',0.3)\n          .attr('cx', function (d) { return x(d.zip_canc_deaths_10k); } )\n          .attr('cy', function (d) { return y(d.zip_canc_COH_10k); })\n          .attr('r', function (d) { return z(d.zip_pop); })  \n          // .attr('class', 'bubble')\n  \n      svg.selectAll('text')\n          .data(dataset)\n          .enter()\n          .append('text')\n          .attr('x', function (d, i) { return x(d.zip_canc_deaths_10k); })\n          .attr('y', function (d) { return y(d.zip_canc_COH_10k);  })\n          .attr('class', 'bubble')\n          // .text(function (d) { return d.zip_code; })\n  \n        // linearRegression = ss.linearRegression(dataset.map(d => [d.deaths, d.coh_patients]));\n        \n  \n        // The scale you use for bubble size\n        var size = d3.scaleSqrt()\n          .domain([1, 100000])  // What's in the data, let's say it is percentage\n          .range([0, 10])  // Size in pixel\n        \n        // Add legend: circles\n        var valuesToShow = [1000,20000, 100000]\n        var xCircle = 700\n        var xLabel = 750\n        var yCircle = 500\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"circle\")\n            .attr(\"cx\", xCircle)\n            .attr(\"cy\", function(d){ return yCircle - size(d) } )\n            .attr(\"r\", function(d){ return size(d) })\n            .style(\"fill\", \"none\")\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 0.3)\n            \n        \n        // Add legend: segments\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"line\")\n            .attr('x1', function(d){ return xCircle + size(d) } )\n            .attr('x2', xLabel)\n            .attr('y1', function(d){ return yCircle - size(d) } )\n            .attr('y2', function(d){ return yCircle - size(d) } )\n            .attr('stroke', 'black')\n            .attr('stroke-width', 0.5)\n            .style('stroke-dasharray', ('2,2'))\n        \n        // Add legend: labels\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"text\")\n            .attr('x', xLabel)\n            .attr('y', function(d){ return yCircle - size(d) } )\n            .text( function(d){ return d } )\n            .style(\"font-size\", 10)\n            .attr('alignment-baseline', 'middle')\n  \n        svg.append(\"g\")\n          .attr(\"transform\", \"translate(0,\" + height + \")\")\n          .call(xAxis);\n      \n        svg.append(\"g\")\n          .call(yAxis);\n      \n        svg.append(\"text\")  \n            .attr(\"x\", 250)\n            .attr(\"y\", 630)\n            .classed('label', true)\n            .text(\"Number of cancer deaths in 2019 (per 10k residents)\");\n        \n        svg.append(\"text\")\n            .attr(\"x\", -450)\n            .attr(\"y\", -50)\n            .classed('label', true)\n            .attr(\"transform\", \"rotate(-90)\")\n            .text(\"Number of cancer patients at City of Hope (per 10k residents)\");\n    \n        svg.append('text')\n            .attr('x', 50) \n            .attr('y', 10) \n            .attr('class', 'bar')\n            .text('Health care access focus areas:');  \n          \n        svg.append('text')\n            .attr('x', 50) \n            .attr('y', 40) \n            .attr('class', 'bar')\n            .text('Treating more patients in zip codes with higher cancer death rates');  \n                      \n        svg.append('text')\n            .attr('x', 710) \n            .attr('y', 420) \n            .text('Number of residents in zip code:')\n            .attr('class', 'bubble');    \n          });\n        \n}\n"]},"metadata":{},"sourceType":"module"}