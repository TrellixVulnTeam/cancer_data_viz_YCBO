{"ast":null,"code":"import*as d3 from'd3';export function drawBubble(height,width){var margin={top:30,right:20,bottom:200,left:150};var width=1000-margin.left-margin.right,height=800-margin.top-margin.bottom;var svg=d3.select(\"#bubble1\").append(\"svg\").attr(\"width\",width+margin.left+margin.right).attr(\"height\",height+margin.top+margin.bottom).append(\"g\").attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");var bubble_data=d3.csv(\"https://raw.githubusercontent.com/Heun-Johnson/dsci554projectdata/main/bubble_data.csv\");bubble_data.then(function(dataset){var x=d3.scaleLinear().domain([0,80]).range([0,width]);var y=d3.scaleLinear().domain([0,4]).range([height,0]);var z=d3.scaleLinear().domain([0,d3.max(dataset,function(d){return d.zip_pop;})]).range([0,3]);var xAxis=d3.axisBottom().scale(x).tickValues([0,20,40,60,80]);var yAxis=d3.axisLeft().scale(y).tickValues([0,1,2,3,4]);svg.selectAll('circle').data(dataset).enter().append('circle').attr('fill','grey').style('fill-opacity',0.1).attr('stroke','black').attr('stroke-width',0.3).attr('cx',function(d){return x(d.zip_canc_deaths_10k);}).attr('cy',function(d){return y(d.zip_canc_COH_10k);}).attr('r',function(d){return z(d.zip_pop);});// .attr('class', 'bubble')\nsvg.selectAll('circle').on(\"mouseover\",function(){d3.select(this).style(\"fill\",'blue').style('fill-opacity',1);});svg.selectAll('circle').on(\"mouseout\",function(){d3.select(this).style(\"fill\",'grey').style('fill-opacity',0.1);});// svg.selectAll('text')\n//     .data(dataset)\n//     .enter()\n//     .append('text')\n//     .attr('x', function (d, i) { return x(d.zip_canc_deaths_10k); })\n//     .attr('y', function (d) { return y(d.zip_canc_COH_10k);  })\n//     .attr('class', 'bubble')\n//     // .text(function (d) { return d.zip_code; })\n// linearRegression = ss.linearRegression(dataset.map(d => [d.deaths, d.coh_patients]));\n// The scale you use for bubble size\nvar size=d3.scaleSqrt().domain([1,100000])// What's in the data, let's say it is percentage\n.range([0,30]);// Size in pixel\n// Add legend: circles\nvar valuesToShow=[1000,20000,100000];var xCircle=width-230;var xLabel=width-180;var yCircle=height-70;svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"circle\").attr(\"cx\",xCircle).attr(\"cy\",function(d){return yCircle-size(d);}).attr(\"r\",function(d){return size(d);}).style(\"fill\",\"none\").attr(\"stroke\",\"black\").attr(\"stroke-width\",0.3);// Add legend: segments\nsvg.selectAll(\"legend\").data(valuesToShow).enter().append(\"line\").attr('x1',function(d){return xCircle+size(d);}).attr('x2',xLabel).attr('y1',function(d){return yCircle-size(d);}).attr('y2',function(d){return yCircle-size(d);}).attr('stroke','black').attr('stroke-width',0.5).style('stroke-dasharray','2,2');// Add legend: labels\nsvg.selectAll(\"legend\").data(valuesToShow).enter().append(\"text\").attr('x',xLabel).attr('y',function(d){return yCircle-size(d);}).text(function(d){return d;}).style(\"font-size\",10).attr('alignment-baseline','middle');svg.append(\"g\").attr(\"transform\",\"translate(0,\"+height+\")\").call(xAxis);svg.append(\"g\").call(yAxis);svg.append(\"text\").attr(\"x\",width-650).attr(\"y\",height+60).classed('label',true).text(\"Number of cancer deaths in 2019 (per 10k residents)\");svg.append(\"text\").attr(\"x\",width-1400).attr(\"y\",height-650).classed('label',true).attr(\"transform\",\"rotate(-90)\").text(\"Number of cancer patients at City of Hope (per 10k residents)\");svg.append('text').attr('x',width-340).attr('y',height-150).text('Number of residents in zip code:').attr('class','bubble');});}","map":{"version":3,"sources":["/Users/carlin/Desktop/USC_classes/DSCI_554/project-datadocs-real/demo/src/views/charts/BubbleChart.js"],"names":["d3","drawBubble","height","width","margin","top","right","bottom","left","svg","select","append","attr","bubble_data","csv","then","dataset","x","scaleLinear","domain","range","y","z","max","d","zip_pop","xAxis","axisBottom","scale","tickValues","yAxis","axisLeft","selectAll","data","enter","style","zip_canc_deaths_10k","zip_canc_COH_10k","on","size","scaleSqrt","valuesToShow","xCircle","xLabel","yCircle","text","call","classed"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\n\nexport function drawBubble(height, width){\n  \n  var margin = { top: 30, right: 20, bottom: 200, left: 150 };\n  var width = 1000 - margin.left - margin.right,\n    height = 800 - margin.top - margin.bottom;\n  \n  var svg = d3.select(\"#bubble1\")\n    .append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  \n  var bubble_data = d3.csv(\"https://raw.githubusercontent.com/Heun-Johnson/dsci554projectdata/main/bubble_data.csv\");\n\n  bubble_data.then(function (dataset) { \n    \n        var x = d3.scaleLinear()\n          .domain([0, 80])\n          .range([0, width]);\n      \n        var y = d3.scaleLinear()\n          .domain([0, 4])\n          .range([height, 0]);\n      \n        var z = d3.scaleLinear()\n          .domain([0, d3.max(dataset, function(d) { return d.zip_pop; })])\n          .range([0,3]);\n  \n        var xAxis = d3.axisBottom()\n          .scale(x)\n          .tickValues([0,20,40,60,80]);\n      \n        var yAxis = d3.axisLeft()\n          .scale(y)\n          .tickValues([0,1,2,3,4]);\n      \n  \n        svg.selectAll('circle')\n          .data(dataset)\n          .enter()\n          .append('circle')\n          .attr('fill','grey')\n          .style('fill-opacity',0.1)\n          .attr('stroke','black')\n          .attr('stroke-width',0.3)\n          .attr('cx', function (d) { return x(d.zip_canc_deaths_10k); } )\n          .attr('cy', function (d) { return y(d.zip_canc_COH_10k); })\n          .attr('r', function (d) { return z(d.zip_pop); })  \n          // .attr('class', 'bubble')\n\n          svg.selectAll('circle')\n            .on(\"mouseover\", function () {\n              d3.select(this).style(\"fill\", 'blue').style('fill-opacity',1);\n          });\n          svg.selectAll('circle')\n            .on(\"mouseout\", function () {\n              d3.select(this).style(\"fill\", 'grey').style('fill-opacity',0.1);\n          });\n      // svg.selectAll('text')\n      //     .data(dataset)\n      //     .enter()\n      //     .append('text')\n      //     .attr('x', function (d, i) { return x(d.zip_canc_deaths_10k); })\n      //     .attr('y', function (d) { return y(d.zip_canc_COH_10k);  })\n      //     .attr('class', 'bubble')\n      //     // .text(function (d) { return d.zip_code; })\n  \n        // linearRegression = ss.linearRegression(dataset.map(d => [d.deaths, d.coh_patients]));\n        \n  \n        // The scale you use for bubble size\n        var size = d3.scaleSqrt()\n          .domain([1, 100000])  // What's in the data, let's say it is percentage\n          .range([0, 30])  // Size in pixel\n        \n        // Add legend: circles\n        var valuesToShow = [1000,20000, 100000]\n        var xCircle = width-230\n        var xLabel = width-180\n        var yCircle = height-70\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"circle\")\n            .attr(\"cx\", xCircle)\n            .attr(\"cy\", function(d){ return yCircle - size(d) } )\n            .attr(\"r\", function(d){ return size(d) })\n            .style(\"fill\", \"none\")\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 0.3)\n            \n        \n        // Add legend: segments\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"line\")\n            .attr('x1', function(d){ return xCircle + size(d) } )\n            .attr('x2', xLabel)\n            .attr('y1', function(d){ return yCircle - size(d) } )\n            .attr('y2', function(d){ return yCircle - size(d) } )\n            .attr('stroke', 'black')\n            .attr('stroke-width', 0.5)\n            .style('stroke-dasharray', ('2,2'))\n        \n        // Add legend: labels\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"text\")\n            .attr('x', xLabel)\n            .attr('y', function(d){ return yCircle - size(d) } )\n            .text( function(d){ return d } )\n            .style(\"font-size\", 10)\n            .attr('alignment-baseline', 'middle')\n  \n        svg.append(\"g\")\n          .attr(\"transform\", \"translate(0,\" + height + \")\")\n          .call(xAxis);\n      \n        svg.append(\"g\")\n          .call(yAxis);\n      \n        svg.append(\"text\")  \n            .attr(\"x\", width-650)\n            .attr(\"y\", height+60)\n            .classed('label', true)\n            .text(\"Number of cancer deaths in 2019 (per 10k residents)\");\n        \n        svg.append(\"text\")\n            .attr(\"x\", width-1400)\n            .attr(\"y\", height-650)\n            .classed('label', true)\n            .attr(\"transform\", \"rotate(-90)\")\n            .text(\"Number of cancer patients at City of Hope (per 10k residents)\");\n                      \n        svg.append('text')\n            .attr('x', width-340) \n            .attr('y', height-150) \n            .text('Number of residents in zip code:')\n            .attr('class', 'bubble');    \n          });\n        \n}\n"]},"metadata":{},"sourceType":"module"}