{"ast":null,"code":"import * as d3 from 'd3';\nexport function drawBubble(height, width) {\n  var margin = {\n    top: 30,\n    right: 20,\n    bottom: 200,\n    left: 150\n  };\n  var width = 1000 - margin.left - margin.right,\n      height = 800 - margin.top - margin.bottom;\n  var svg = d3.select(\"#bubble1\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  var bubble_data = d3.csv(\"https://raw.githubusercontent.com/Heun-Johnson/dsci554projectdata/blob/main/bubble_data.csv\", d => {\n    return {\n      zip_code: d.zip_code,\n      zip_pop: +d.zip_pop,\n      deaths: +d.zip_canc_deaths_10k,\n      coh_patients: +d.zip_canc_COH_10k\n    };\n  });\n  bubble_data.then(function (dataset) {\n    console.log(new Set(dataset));\n    var x = d3.scaleLinear().domain([0, 80]).range([0, width]);\n    var y = d3.scaleLinear().domain([0, 4]).range([height, 0]);\n    var z = d3.scaleLinear().domain([0, d3.max(dataset, function (d) {\n      return d.zip_pop;\n    })]).range([0, 30]);\n    var xAxis = d3.axisBottom().scale(x).tickValues([0, 20, 40, 60, 80]);\n    var yAxis = d3.axisLeft().scale(y).tickValues([0, 1, 2, 3, 4]);\n    svg.selectAll('circle').data(dataset).enter().append('circle').attr('fill', 'grey').style('fill-opacity', 0.1).attr('stroke', 'black').attr('stroke-width', 0.3).attr('cx', function (d) {\n      return x(d.deaths);\n    }).attr('cy', function (d) {\n      return y(d.coh_patients);\n    }).attr('r', function (d) {\n      return z(d.zip_pop);\n    }); // .attr('class', 'bubble')\n\n    svg.selectAll('text').data(dataset).enter().append('text').attr('x', function (d, i) {\n      return x(d.deaths);\n    }).attr('y', function (d) {\n      return y(d.coh_patients);\n    }).attr('class', 'bubble'); // .text(function (d) { return d.zip_code; })\n    // linearRegression = ss.linearRegression(dataset.map(d => [d.deaths, d.coh_patients]));\n    // The scale you use for bubble size\n\n    var size = d3.scaleSqrt().domain([1, 100000]) // What's in the data, let's say it is percentage\n    .range([0, 30]); // Size in pixel\n    // Add legend: circles\n\n    var valuesToShow = [1000, 20000, 100000];\n    var xCircle = 700;\n    var xLabel = 750;\n    var yCircle = 500;\n    svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"circle\").attr(\"cx\", xCircle).attr(\"cy\", function (d) {\n      return yCircle - size(d);\n    }).attr(\"r\", function (d) {\n      return size(d);\n    }).style(\"fill\", \"none\").attr(\"stroke\", \"black\").attr(\"stroke-width\", 0.3); // Add legend: segments\n\n    svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"line\").attr('x1', function (d) {\n      return xCircle + size(d);\n    }).attr('x2', xLabel).attr('y1', function (d) {\n      return yCircle - size(d);\n    }).attr('y2', function (d) {\n      return yCircle - size(d);\n    }).attr('stroke', 'black').attr('stroke-width', 0.5).style('stroke-dasharray', '2,2'); // Add legend: labels\n\n    svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"text\").attr('x', xLabel).attr('y', function (d) {\n      return yCircle - size(d);\n    }).text(function (d) {\n      return d;\n    }).style(\"font-size\", 10).attr('alignment-baseline', 'middle');\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(xAxis);\n    svg.append(\"g\").call(yAxis);\n    svg.append(\"text\").attr(\"x\", 250).attr(\"y\", 630).classed('label', true).text(\"Number of cancer deaths in 2019 (per 10k residents)\");\n    svg.append(\"text\").attr(\"x\", -450).attr(\"y\", -50).classed('label', true).attr(\"transform\", \"rotate(-90)\").text(\"Number of cancer patients at City of Hope (per 10k residents)\");\n    svg.append('text').attr('x', 50).attr('y', 10).attr('class', 'bar').text('Health care access focus areas:');\n    svg.append('text').attr('x', 50).attr('y', 40).attr('class', 'bar').text('Treating more patients in zip codes with higher cancer death rates');\n    svg.append('text').attr('x', 710).attr('y', 420).text('Number of residents in zip code:').attr('class', 'bubble');\n  });\n}","map":{"version":3,"sources":["/Users/HHJ/Dropbox/Class/2021/DSCI554/Github/project-datadocs/demo/src/views/charts/BubbleChart.js"],"names":["d3","drawBubble","height","width","margin","top","right","bottom","left","svg","select","attr","append","bubble_data","csv","d","zip_code","zip_pop","deaths","zip_canc_deaths_10k","coh_patients","zip_canc_COH_10k","then","dataset","console","log","Set","x","scaleLinear","domain","range","y","z","max","xAxis","axisBottom","scale","tickValues","yAxis","axisLeft","selectAll","data","enter","style","i","size","scaleSqrt","valuesToShow","xCircle","xLabel","yCircle","text","call","classed"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\n\nexport function drawBubble(height, width){\n  var margin = { top: 30, right: 20, bottom: 200, left: 150 };\n  var width = 1000 - margin.left - margin.right,\n    height = 800 - margin.top - margin.bottom;\n  \n  var svg = d3.select(\"#bubble1\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  \n  var bubble_data = d3.csv(\"https://raw.githubusercontent.com/Heun-Johnson/dsci554projectdata/blob/main/bubble_data.csv\", d => {\n    return {\n            zip_code: d.zip_code,\n            zip_pop: +d.zip_pop,\n            deaths: +d.zip_canc_deaths_10k,\n            coh_patients: +d.zip_canc_COH_10k\n        };\n    })\n  \n  bubble_data.then(function (dataset) { \n  \n        console.log(new Set(dataset))\n  \n        var x = d3.scaleLinear()\n          .domain([0, 80])\n          .range([0, width]);\n      \n        var y = d3.scaleLinear()\n          .domain([0, 4])\n          .range([height, 0]);\n      \n        var z = d3.scaleLinear()\n          .domain([0, d3.max(dataset, function(d) { return d.zip_pop; })])\n          .range([0,30]);\n  \n        var xAxis = d3.axisBottom()\n          .scale(x)\n          .tickValues([0,20,40,60,80]);\n      \n        var yAxis = d3.axisLeft()\n          .scale(y)\n          .tickValues([0,1,2,3,4]);\n      \n  \n        svg.selectAll('circle')\n          .data(dataset)\n          .enter()\n          .append('circle')\n          .attr('fill','grey')\n          .style('fill-opacity',0.1)\n          .attr('stroke','black')\n          .attr('stroke-width',0.3)\n          .attr('cx', function (d) { return x(d.deaths); } )\n          .attr('cy', function (d) { return y(d.coh_patients); })\n          .attr('r', function (d) { return z(d.zip_pop); })  \n          // .attr('class', 'bubble')\n  \n      svg.selectAll('text')\n          .data(dataset)\n          .enter()\n          .append('text')\n          .attr('x', function (d, i) { return x(d.deaths); })\n          .attr('y', function (d) { return y(d.coh_patients);  })\n          .attr('class', 'bubble')\n          // .text(function (d) { return d.zip_code; })\n  \n        // linearRegression = ss.linearRegression(dataset.map(d => [d.deaths, d.coh_patients]));\n        \n  \n        // The scale you use for bubble size\n        var size = d3.scaleSqrt()\n          .domain([1, 100000])  // What's in the data, let's say it is percentage\n          .range([0, 30])  // Size in pixel\n        \n        // Add legend: circles\n        var valuesToShow = [1000,20000, 100000]\n        var xCircle = 700\n        var xLabel = 750\n        var yCircle = 500\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"circle\")\n            .attr(\"cx\", xCircle)\n            .attr(\"cy\", function(d){ return yCircle - size(d) } )\n            .attr(\"r\", function(d){ return size(d) })\n            .style(\"fill\", \"none\")\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 0.3)\n            \n        \n        // Add legend: segments\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"line\")\n            .attr('x1', function(d){ return xCircle + size(d) } )\n            .attr('x2', xLabel)\n            .attr('y1', function(d){ return yCircle - size(d) } )\n            .attr('y2', function(d){ return yCircle - size(d) } )\n            .attr('stroke', 'black')\n            .attr('stroke-width', 0.5)\n            .style('stroke-dasharray', ('2,2'))\n        \n        // Add legend: labels\n        svg\n          .selectAll(\"legend\")\n          .data(valuesToShow)\n          .enter()\n          .append(\"text\")\n            .attr('x', xLabel)\n            .attr('y', function(d){ return yCircle - size(d) } )\n            .text( function(d){ return d } )\n            .style(\"font-size\", 10)\n            .attr('alignment-baseline', 'middle')\n  \n        svg.append(\"g\")\n          .attr(\"transform\", \"translate(0,\" + height + \")\")\n          .call(xAxis);\n      \n        svg.append(\"g\")\n          .call(yAxis);\n      \n        svg.append(\"text\")  \n            .attr(\"x\", 250)\n            .attr(\"y\", 630)\n            .classed('label', true)\n            .text(\"Number of cancer deaths in 2019 (per 10k residents)\");\n        \n        svg.append(\"text\")\n            .attr(\"x\", -450)\n            .attr(\"y\", -50)\n            .classed('label', true)\n            .attr(\"transform\", \"rotate(-90)\")\n            .text(\"Number of cancer patients at City of Hope (per 10k residents)\");\n    \n        svg.append('text')\n            .attr('x', 50) \n            .attr('y', 10) \n            .attr('class', 'bar')\n            .text('Health care access focus areas:');  \n          \n        svg.append('text')\n            .attr('x', 50) \n            .attr('y', 40) \n            .attr('class', 'bar')\n            .text('Treating more patients in zip codes with higher cancer death rates');  \n                      \n        svg.append('text')\n            .attr('x', 710) \n            .attr('y', 420) \n            .text('Number of residents in zip code:')\n            .attr('class', 'bubble');    \n          });\n        \n}\n"]},"metadata":{},"sourceType":"module"}